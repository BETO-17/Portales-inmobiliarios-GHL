```markdown
# GHL â†” Portal Inmobiliario Sync (PMV)

**SincronizaciÃ³n bidireccional en tiempo real entre GoHighLevel y portales inmobiliarios (Adondevivir, Urbania, etc.)**

[![Python](https://img.shields.io/badge/Python-3.11-blue)](https://python.org)
[![Django](https://img.shields.io/badge/Django-5.2-green)](https://djangoproject.com)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

---

## ğŸš€ Funcionalidades

| Check | Feature |
|-------|--------|
| Check | OAuth 2.0 con GHL (PKCE) |
| Check | Token guardado en BD |
| Check | Webhook con firma HMAC (SHA256) |
| Check | Sync automÃ¡tico de propiedades |
| Check | PublicaciÃ³n automÃ¡tica en portal |
| Check | URL de retorno guardada en BD |
| Check | API REST completa |

---

## ğŸ—ï¸ Arquitectura

```mermaid
graph TD
    A[Agente en GHL] -->|Crea/Edita| B(GHL)
    B -->|Webhook| C[Django Backend]
    C -->|Actualiza| D[(SQLite)]
    C -->|Publica| E[Adondevivir]
    E -->|URL| C
    C -->|Guarda portal_url| D
    F[Navegador] -->|/api/properties/ | C
```

---

## âš™ï¸ InstalaciÃ³n (Paso a Paso)

```bash
# 1. Clona el repo
git clone https://github.com/alejandro586/depas_ghl.git
cd depas_ghl.git

# 2. CREA el entorno virtual (venv)
python -m venv venv

# 3. ACTIVA el entorno
# Linux / Mac:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# 4. Instala dependencias
pip install -r requirements.txt

# 5. Configura variables
cp .env.example .env
# Abre .env y pega tus credenciales de GHL

# 6. Migraciones
python manage.py migrate

# 7. Inicia el servidor
python manage.py runserver

---

## ğŸ”‘ ConfiguraciÃ³n GHL Marketplace

1. Crea app en [marketplace.gohighlevel.com](https://marketplace.gohighlevel.com)
2. Scopes: `opportunities.readwrite opportunities.webhook`
3. Redirect URI: `http://localhost:8000/api/auth/callback/`
4. Webhook URL: `http://localhost:8000/api/webhook/ghl/`
5. Secret: Copia a `WEBHOOK_SECRET`

---

## ğŸ§ª Prueba RÃ¡pida

1. `http://localhost:8000/api/auth/install/` â†’ Autoriza
2. Crea oportunidad en GHL â†’ `Casa Prueba`
3. En <5s â†’ `http://localhost:8000/api/properties/` â†’ `portal_url` generado

---

## ğŸ“¡ Endpoints

| MÃ©todo | URL | DescripciÃ³n |
|-------|-----|------------|
| GET | `/api/auth/install/` | Inicia OAuth |
| GET | `/api/properties/` | Lista propiedades |
| POST | `/api/publish/<ghl_id>/` | Publicar manual |

---

## ğŸ”® PrÃ³ximos Pasos

- [ ] Frontend React (Dashboard)
- [ ] API real de Adondevivir
- [ ] Pagos con Mercado Pago
- [ ] Multi-portal (Urbania, etc.)

---

## ğŸ‘¨â€ğŸ’» Autor

**Alejandro** â€“ Desarrollador Full-Stack  
13 de noviembre de 2025 â€“ PMV en 6 horas

---

**Â¡Listo para SaaS, demo o venta!**
```